<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Max Soccer ⚽ | VIP Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Orbitron',sans-serif;}
body{
  background:radial-gradient(circle at top,#1b1f4b,#070a1f);
  color:#fff;
  min-height:100vh;
}

/* HERO */
.hero{
  padding:4rem 2rem;
  text-align:center;
}
.hero h1{
  font-size:3rem;
  color:#ff0000;
  text-shadow:0 0 20px #ff0000;
  margin-bottom:1rem;
}
.hero p{
  max-width:700px;
  margin:auto;
  font-size:1.2rem;
  opacity:.9;
}

/* VIP EXPIRY */
.vip-expiry{
  margin-top:1.5rem;
  font-size:1.1rem;
  color:#ff4d4d;
  font-weight:700;
}

/* GRID CARDS */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:2.5rem;
  padding:3rem;
  max-width:1400px;
  margin:auto;
}

/* CARD */
.card{
  background:rgba(255,255,255,.07);
  border-radius:25px;
  padding:2rem;
  text-align:center;
  backdrop-filter:blur(15px);
  box-shadow:0 15px 45px rgba(0,0,0,.5);
  transition:.4s;
  position:relative;
  animation:pulseGlow 2.5s infinite alternate;
}
@keyframes pulseGlow{
  0%{ box-shadow:0 0 35px rgba(255,0,0,.4); }
  50%{ box-shadow:0 0 55px rgba(255,0,0,.7); }
  100%{ box-shadow:0 0 40px rgba(255,0,0,.5); }
}
.card img{
  width:100%;
  border-radius:18px;
  margin-bottom:1rem;
  transform:perspective(900px) rotateX(7deg);
  transition:.4s;
}
.card:hover img{
  transform:perspective(900px) rotateX(0deg) scale(1.05);
}
.card h3{
  font-size:1.5rem;
  margin-bottom:0.8rem;
}
.card p{
  opacity:.85;
  line-height:1.6;
}

/* BUTTON */
.pay-btn{
  margin-top:1rem;
  padding:0.9rem 2rem;
  font-size:1rem;
  font-weight:bold;
  background:linear-gradient(135deg,#ff0000,#ff4d4d);
  color:#fff;
  border:none;
  border-radius:50px;
  cursor:pointer;
  box-shadow:0 0 35px rgba(255,0,0,.6);
  transition:0.3s;
}
.pay-btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 65px rgba(255,0,0,.9);
}

/* FOOTER */
footer{
  padding:2rem;
  text-align:center;
  opacity:.7;
  font-size:0.9rem;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://checkout.flutterwave.com/v3.js"></script>
</head>
<body>

<div class="hero">
  <h1>VIP Dashboard ⚽</h1>
  <p>Welcome to Max Soccer VIP. Access live AI predictions, stats, and exclusive Liverpool insights.</p>
  <div class="vip-expiry">VIP Expiry: <span id="vipCountdown">Loading...</span></div>
</div>

<!-- AI Predictions -->
<section class="grid" id="predictionGrid">
  <!-- Cards dynamically populated -->
</section>

<!-- Top-up / renew VIP -->
<div style="text-align:center;margin:2rem;">
  <button class="pay-btn" id="renewVipBtn">Renew / Upgrade VIP ($10)</button>
</div>

<footer>
  © 2026 Max Soccer ⚽ — Live Football Intelligence
</footer>

<script>
const supabaseUrl = "https://iotraxlicmdyybtgmkwm.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlvdHJheGxpY21keXlidGdta3dtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzNTA1OTAsImV4cCI6MjA4MzkyNjU5MH0.f69kiDeO7h0RPwRhSzINFoiVRRFjDB_CYk4nbhl2zBA";
const supabase = supabaseJs.createClient(supabaseUrl, supabaseKey);

// Assume user is logged in, get user info
async function loadVIP(){
  const user = supabase.auth.getUser();
  const { data: profile } = await supabase.from("profiles").select("*").eq("id", user.user.id).single();

  // VIP countdown
  let vipExpiry = profile.vip_expiry ? new Date(profile.vip_expiry) : null;
  if(vipExpiry){
    const countdownEl = document.getElementById("vipCountdown");
    setInterval(()=>{
      const now = new Date();
      const diff = vipExpiry - now;
      if(diff>0){
        const d = Math.floor(diff/1000/60/60/24);
        const h = Math.floor((diff/1000/60/60)%24);
        const m = Math.floor((diff/1000/60)%60);
        const s = Math.floor((diff/1000)%60);
        countdownEl.textContent = `${d}d ${h}h ${m}m ${s}s`;
      } else countdownEl.textContent="Expired";
    },1000);
  } else {
    document.getElementById("vipCountdown").textContent = "Inactive";
  }

  // Load AI predictions (example using VIP table or public API)
  const { data: vipPreds } = await supabase.from("vip_predictions").select("*").order("created_at",{ascending:false});
  const grid = document.getElementById("predictionGrid");
  grid.innerHTML = "";
  vipPreds.forEach(pred=>{
    grid.innerHTML += `
      <div class="card">
        <img src="${pred.thumbnail || 'https://upload.wikimedia.org/wikipedia/commons/0/0c/Soccer_ball.svg'}" alt="Prediction">
        <h3>${pred.match}</h3>
        <p>${pred.prediction}</p>
        <p>Confidence: ${pred.probability}%</p>
      </div>
    `;
  });
}

// Flutterwave VIP Payment
document.getElementById("renewVipBtn").addEventListener("click", ()=>{
  const userEmail = supabase.auth.getUser().user.email;
  const userId = supabase.auth.getUser().user.id;

  FlutterwaveCheckout({
    public_key: "FLW_PUBLIC_KEY", // Replace with your live key
    tx_ref: "maxsoccer_"+Date.now(),
    amount: 10,
    currency: "USD",
    payment_options: "card",
    customer: {
      email: userEmail
    },
    callback: async function(response){
      if(response.status==="successful"){
        // Update Supabase VIP expiry
        const newExpiry = new Date();
        newExpiry.setMonth(newExpiry.getMonth()+1); // 1 month VIP
        await supabase.from("profiles").update({vip_expiry:newExpiry.toISOString(), is_vip:true}).eq("id", userId);
        alert("VIP activated! Reloading dashboard...");
        location.reload();
      } else {
        alert("Payment failed or cancelled.");
      }
    },
    onclose: function(){},
    customizations: {
      title: "Max Soccer VIP",
      description: "1 Month VIP Subscription",
      logo: "https://upload.wikimedia.org/wikipedia/commons/0/0c/Soccer_ball.svg"
    }
  });
});

// Load VIP dashboard content
loadVIP();
</script>

</body>
</html>