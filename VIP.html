<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Max Soccer ⚽ | VIP Predictions</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Orbitron', sans-serif; }
  body { background: linear-gradient(135deg,#0f0c29,#302b63,#24243e); color:#fff; min-height:100vh; }
  header { display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); position: sticky; top:0; z-index:1000; }
  .logo h2 { color:#ff0000; text-shadow:0 0 10px #ff0000; }
  nav a { margin-left:1.5rem; color:#fff; font-weight:600; transition:color 0.3s; }
  nav a:hover { color:#ff0000; }
  section { padding:4rem 2rem; }
  .section-title { text-align:center; font-size:2rem; margin-bottom:2rem; color:#ff0000; text-transform:uppercase; letter-spacing:2px; }
  .cards { display:grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap:1.5rem; }
  .card { background: rgba(255,255,255,0.05); border-radius:15px; padding:1.5rem; backdrop-filter:blur(5px); transition: transform 0.3s, box-shadow 0.3s; }
  .card:hover { transform: translateY(-10px); box-shadow:0 10px 30px rgba(255,0,0,0.5); }
  .logout-btn { display:block; margin:2rem auto; padding:1rem 2rem; background:#ff0000; color:#fff; border:none; border-radius:10px; font-weight:bold; cursor:pointer; transition: transform 0.3s; }
  .logout-btn:hover { transform: scale(1.05); }
  .message { text-align:center; margin-bottom:2rem; color:#0ff; font-size:1.1rem; }
</style>
</head>
<body>

<header>
  <div class="logo"><h2>Max Soccer ⚽ VIP</h2></div>
  <nav>
    <a href="index.html">Home</a>
    <a href="vip.html">VIP</a>
    <a href="login-register.html">Login/Register</a>
  </nav>
</header>

<section>
  <h2 class="section-title">Exclusive VIP Predictions</h2>
  <div class="message" id="welcome-msg"></div>
  <div class="cards" id="vip-predictions"></div>
  <button class="logout-btn" id="logout-btn">Logout</button>
</section>

<script>
  // ===== Supabase Setup =====
  const SUPABASE_URL = "YOUR_SUPABASE_URL";
  const SUPABASE_ANON_KEY = "YOUR_SUPABASE_ANON_KEY";
  const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const vipContainer = document.getElementById('vip-predictions');
  const welcomeMsg = document.getElementById('welcome-msg');
  const logoutBtn = document.getElementById('logout-btn');

  // ===== Check if user is logged in =====
  async function checkAuth() {
    const { data: { session } } = await supabase.auth.getSession();
    if(!session){
      window.location.href = "login-register.html"; // redirect if not logged in
      return;
    }
    welcomeMsg.textContent = `Welcome VIP: ${session.user.email}`;
    fetchVIPPredictions();
  }

  checkAuth();

  // ===== Fetch VIP Predictions from Supabase =====
  async function fetchVIPPredictions() {
    try {
      const { data, error } = await supabase
        .from('vip_predictions') // table for VIP content
        .select('*')
        .order('match_date', { ascending:true })
        .limit(10);
      if(error) throw error;

      vipContainer.innerHTML = '';
      data.forEach(pred => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${pred.match}</h3>
          <p>${pred.prediction}</p>
          <small>Match Date: ${new Date(pred.match_date).toLocaleString()}</small>
        `;
        vipContainer.appendChild(card);
      });
    } catch(err) {
      vipContainer.innerHTML = '<p>Unable to fetch VIP predictions.</p>';
      console.error(err);
    }
  }

  // ===== Logout =====
  logoutBtn.addEventListener('click', async () => {
    await supabase.auth.signOut();
    window.location.href = "login-register.html";
  });
</script>

</body>
</html>