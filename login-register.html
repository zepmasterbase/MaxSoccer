<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Max Soccer ⚽ | Login & Register</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  /* ===== Global ===== */
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Orbitron', sans-serif; }
  body { background: linear-gradient(135deg, #0f0c29, #302b63, #24243e); color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; }
  
  /* ===== Modal ===== */
  .modal { background: rgba(255,255,255,0.05); border-radius: 15px; backdrop-filter: blur(10px); padding: 2rem; width: 350px; max-width:90%; text-align:center; position: relative; box-shadow:0 0 30px rgba(255,0,0,0.4); }
  h2 { color:#ff0000; margin-bottom:1rem; text-shadow: 0 0 10px #ff0000; }
  input { width:100%; padding:0.8rem; margin-bottom:1rem; border-radius:8px; border:none; background:rgba(255,255,255,0.1); color:#fff; font-size:1rem; }
  input::placeholder { color:#ccc; }
  button { width:100%; padding:0.8rem; background:#ff0000; border:none; border-radius:8px; font-weight:bold; font-size:1rem; cursor:pointer; transition:transform 0.3s; color:#fff; }
  button:hover { transform:scale(1.05); }
  .toggle { margin-top:1rem; cursor:pointer; color:#0ff; font-size:0.9rem; transition:color 0.3s; }
  .toggle:hover { color:#ff0; }
  .error { color:#ff4444; margin-bottom:0.5rem; font-size:0.9rem; }
  .success { color:#0f0; margin-bottom:0.5rem; font-size:0.9rem; }

  /* ===== Fade In ===== */
  .fade { opacity:0; transform:translateY(20px); animation:fadeIn 0.6s forwards; }
  @keyframes fadeIn { to { opacity:1; transform:translateY(0); } }
</style>
</head>
<body>

<div class="modal fade" id="auth-modal">
  <h2 id="modal-title">Login to Max Soccer ⚽</h2>
  <div id="message"></div>
  <input type="email" id="email" placeholder="Email" />
  <input type="password" id="password" placeholder="Password" />
  <button id="auth-button">Login</button>
  <div class="toggle" id="toggle-auth">Don't have an account? Register</div>
</div>

<script>
  // ===== Supabase Setup =====
  const SUPABASE_URL = "YOUR_SUPABASE_URL";
  const SUPABASE_ANON_KEY = "YOUR_SUPABASE_ANON_KEY";
  const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // ===== Elements =====
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const authButton = document.getElementById('auth-button');
  const toggleAuth = document.getElementById('toggle-auth');
  const modalTitle = document.getElementById('modal-title');
  const messageEl = document.getElementById('message');

  let isLogin = true; // toggle state

  // ===== Toggle Login/Register =====
  toggleAuth.addEventListener('click', () => {
    isLogin = !isLogin;
    if(isLogin){
      modalTitle.textContent = "Login to Max Soccer ⚽";
      authButton.textContent = "Login";
      toggleAuth.textContent = "Don't have an account? Register";
    } else {
      modalTitle.textContent = "Register for Max Soccer ⚽";
      authButton.textContent = "Register";
      toggleAuth.textContent = "Already have an account? Login";
    }
    messageEl.innerHTML = "";
  });

  // ===== Auth Function =====
  authButton.addEventListener('click', async () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();
    if(!email || !password){
      messageEl.innerHTML = '<div class="error">Please enter email and password</div>';
      return;
    }

    messageEl.innerHTML = "";

    if(isLogin){
      // LOGIN
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      if(error){
        messageEl.innerHTML = `<div class="error">${error.message}</div>`;
      } else {
        messageEl.innerHTML = `<div class="success">Login successful! Redirecting…</div>`;
        setTimeout(() => { window.location.href = "index.html"; }, 1500);
      }
    } else {
      // REGISTER
      const { data, error } = await supabase.auth.signUp({ email, password });
      if(error){
        messageEl.innerHTML = `<div class="error">${error.message}</div>`;
      } else {
        messageEl.innerHTML = `<div class="success">Registration successful! Please check your email to confirm.</div>`;
        emailInput.value = "";
        passwordInput.value = "";
      }
    }
  });

</script>
</body>
</html>